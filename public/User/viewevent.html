<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
	<link rel="icon" type="image/png" href="../assets/img/favicon.png">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>Profile Page - Material Kit by Creative Tim</title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />

	<!--     Fonts and icons     -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />

	<!-- CSS Files -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../assets/css/material-kit.css" rel="stylesheet"/>
	<script src="../assets/js/jquery.min.js"> </script>

<script> 
$(function(){
  $("#headerclass").load("header.html"); 
  $("#footerclass").load("footer.html");
});
</script>  
</head>

<body class="profile-page">
	<div id="headerclass">
	
	</div>
    <div class="wrapper">
    	<div    id="event-img"
    			class="header header-filter">

    	</div>

		<div class="main main-raised">
			<div class="profile-content">



	            <div id="eventContent" class="container">
					
				</div>
				
				<!-- template code -->
				<script id="eventTemplate" type="text/x-handlebars-template">
					<div class="row">
						<div class="profile">	                       
							<div class="name">
								<h1 class="title"><b>{{name}}</b></h1>						
							</div>
						</div>
					</div>
					<div class="col-md-12">
						<div style="background-color:#E6DFDF; border-radius:10px;" class="col-md-3">
							<center><h4><b>Venue </b></h4><br></center>
							
							<label><font style="color:black">Street Name : {{venue.street}} </font></label><br>
							<label><font style="color:black">City Name : {{venue.city}} </font></label><br>
							<label><font style="color:black">State Name : {{venue.state}} </font></label><br>
							<label><font style="color:black">Country Name : {{venue.country}}</font></label><br>
							<label><font style="color:black">Pincode : {{venue.pincode}} </font></label><br>
						</div>
						<div class="col-md-8" style="background-color:#E6DFDF; border-radius:10px; margin-left:30px;">
														
							<center><label><font size="10px" style="color:black"> Organized By : {{ngoId}} </font></label><br>
							
							<label><font size="10px" style="color:black"> Date : {{date}} </font></label><br><br>
							<br>
							
							<form action="viewevent.html" method="post">
								<input id="btnRsvp" style="border-radius:10px;" type="button" onclick="rsvp()" class="btn btn-primary" name="btnadd" value="RSVP">						
							</form>
							</center>
						</div>
						
					</div>

					<div class="row">
						<div class="col-md-6 col-md-offset-3">
							<div class="profile-tabs">
								<div class="nav-align-center">
									<ul class="nav nav-pills" role="tablist">
										<li class="active">
											<a href="#studio" role="tab" data-toggle="tab">
												<i class="material-icons">camera</i>
												Event
											</a>
										</li>
										<li>
											<a href="#work" role="tab" data-toggle="tab">
												<i class="material-icons">palette</i>
												Galary 
											</a>
										</li>				                        
									</ul>

									<div class="tab-content gallery">
										<div class="tab-pane" id="studio">
											<div class="row">
												<div class="col-md-6">
													<img src="../assets/img/examples/chris1.jpg" class="img-rounded" />
													<img src="../assets/img/examples/chris0.jpg" class="img-rounded" />
												</div>
												<div class="col-md-6">
													<img src="../assets/img/examples/chris3.jpg" class="img-rounded" />
													<img src="../assets/img/examples/chris4.jpg" class="img-rounded" />
												</div>
											</div>
										</div>
										<div class="tab-pane text-center" id="work">
											<div class="row">
												<div class="col-md-6">
													<img src="../assets/img/examples/chris5.jpg" class="img-rounded" />
													<img src="../assets/img/examples/chris7.jpg" class="img-rounded" />
													<img src="../assets/img/examples/chris9.jpg" class="img-rounded" />
												</div>
												<div class="col-md-6">
													<img src="../assets/img/examples/chris6.jpg" class="img-rounded" />
													<img src="../assets/img/examples/chris8.jpg" class="img-rounded" />
												</div>
											</div>
										</div>
										

									</div>
								</div>
							</div>
							<!-- End Profile Tabs -->
						</div>
					</div>

				</script>

	        </div>
		</div>

    
    <div id="footerclass">
	
	</div>

</body>
	<!--   Core JS Files   -->
	<script src="../assets/js/jquery.min.js" type="text/javascript"></script>
	<script src="../assets/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="../assets/js/material.min.js"></script>

	<!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
	<script src="../assets/js/nouislider.min.js" type="text/javascript"></script>

	<!--  Plugin for the Datepicker, full documentation here: http://www.eyecon.ro/bootstrap-datepicker/ -->
	<script src="../assets/js/bootstrap-datepicker.js" type="text/javascript"></script>

	<!-- Control Center for Material Kit: activating the ripples, parallax effects, scripts from the example pages etc -->
	<script src="../assets/js/material-kit.js" type="text/javascript"></script>


	<script src="/assets/js/handlebars-v4.0.11.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js" type="text/javascript"></script>
    
	<script type="text/javascript">
		
		function getParameterByName(name) {
		    var url = window.location.href;
		    name = name.replace(/[\[\]]/g, "\\$&");
		    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
		        results = regex.exec(url);
		    if (!results) return null;
		    if (!results[2]) return '';
		    return decodeURIComponent(results[2].replace(/\+/g, " "));
		}
		
		var currentEvent = {};


		$().ready(function(){
			var id = getParameterByName('id')
			console.log(id)

			axios.get('/api/events/fetch/'+id)
				.then(function (resp) {
					console.log(resp);
					currentEvent = resp.data;
					var source   = document.getElementById('eventTemplate').innerHTML;
					var template = Handlebars.compile(source);
					$("#eventContent").html(template(resp.data));
					
					if(resp.data.photos[0].image)
						$("#event-img").css("background-image", "url('"+ resp.data.photos[0].image + "')");  
					else
						$("#event-img").css("background-image", "url('../assets/img/bg.jpg')");
				})
				.catch(function (error) {
					$("#loading").html('Invalid Id');
					console.log(error);
				});		


		 });

		function rsvp(){
				console.log(event)
				var data = {
					email: 'emai@mail.com',
					attendees: 10
				}

				axios.post('/api/events/rsvp/'+currentEvent._id, data)
				.then(function (resp) {
					console.log(resp.data);
					alert('registered')
				})
				.catch(function (error) {
					alert('unable to register')
					console.log(error)
				});			
			}

	</script>
</html>
